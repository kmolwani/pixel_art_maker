<!DOCTYPE html>
<html>
<head>
    <title>Pixel Art Maker!</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Monoton">
    <link rel="stylesheet" href="main.css">
    <script src="designs.js" type="text/javascript"></script>
</head>
<body>
    <h1>Pixel Art Maker</h1>

    <h2>Choose Grid Size</h2>
    <form id="sizePicker">
        Grid Height:
        <input type="number" id="inputHeight" name="height" min="1" value="10">
        Grid Width:
        <input type="number" id="inputWidth" name="width" min="1" value="10">
        <input type="submit" value = "Let's Start"> <br>
    </form>

    <h2>Pick A Color</h2>
    <input type="color" id="colorPicker" value="#aa0000">

    <h2>Design Canvas</h2>
    <h3 id = 'message'> Click/Drag Mouse to Color & Double click to Remove Color </h3>
    <table id="pixelCanvas"></table>

<!--
    ////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////////////////////// -->
    
    <script>
    // Select color input

    // Select size input

    // When size is submitted by the user, call makeGrid()
    ////////////////////////////////////////////////////////////////////////////////
    // loading the grid when the user clicks the submit button
    $('#sizePicker').submit(function(event) {
      if (loopRun == 1) { // removing the old grid to make new grid
        $('#pixelCanvas').empty("#pixelCanvas");
        loopRun = 0;
        makeGrid();
      } else { // making initial grid
        makeGrid();
      }
    });
    ////////////////////////////////////////////////////////////////////////////////

    ////////////////////////////////////////////////////////////////////////////////
    // allowing user to color the canvas or removing color from the canvas
    $('#pixelCanvas').on('click', 'td', function(){ //coloring a cell
      var colorPickerValue = $('#colorPicker').val();
      $(this).css('background-color', colorPickerValue);
    });

    $('#pixelCanvas').on('dblclick', 'td', function(){ //removing color from the cell
        $(this).css('background-color', $('body').css('background-color'));
    });
    ////////////////////////////////////////////////////////////////////////////////

    ////////////////////////////////////////////////////////////////////////////////
    // allowing user to color via dragging the cursor
    var mouseDrag = 0;
    $('#pixelCanvas').on("mousedown", function() {
      mouseDrag = 1;
    });

    $('body').on("mouseup", function() {
      mouseDrag = 0;
    });

    $('#pixelCanvas').on("mouseover", "td", function(e) {
      if (mouseDrag == 1) {
        var colorPickerValue = $('#colorPicker').val();
        $(this).css("background", colorPickerValue);
      }
    });
    ////////////////////////////////////////////////////////////////////////////////

    ////////////////////////////////////////////////////////////////////////////////
    // this is what is called to make user specified N by M grid
    var loopRun = 0; // using loopRun to reset the grid if the user want to make a new size grid
    var column = '<td></td>'; // creating a column cell
    var columns = ''; // empty column string

    function makeGrid() {
        var rowValue = $('#inputHeight').val(); // getting the number of rows the user wants
        var columnValue = $('#inputWidth').val(); //  getting the number of columns the user wants

        loopRun += 1; // setting loopRun value to 1

        for (var i=1; i <= rowValue; i++) {
          for (var j=1; j <= columnValue; j++) {
            columns = columns + column;
          }
          var rows = $('<tr>' + columns+ '</tr>'); // adding the all of the columns generated from the for loop to the i-th row.
          $('#pixelCanvas').append(rows); // appending all of the columns that were generated for the i-th row.
          columns = ''; // setting the columns string to empty again to make new grid column for the next row.
        }
        event.preventDefault(); // preventing the submit button to refreshing the page
    };
    ////////////////////////////////////////////////////////////////////////////////

    </script>
</body>
</html>
